From 4ed99f311ae8aed8b588be891f5647cb65b2921c Mon Sep 17 00:00:00 2001
From: Yi Xie <imxieyi@users.noreply.github.com>
Date: Mon, 26 Feb 2024 14:31:09 +0900
Subject: [PATCH] Get rid of stories

---
 .../ChatListUI/Sources/ChatListController.swift      | 12 +-----------
 .../ChatListUI/Sources/ChatListControllerNode.swift  |  8 --------
 2 files changed, 1 insertion(+), 19 deletions(-)

diff --git a/submodules/ChatListUI/Sources/ChatListController.swift b/submodules/ChatListUI/Sources/ChatListController.swift
index 3938229ae4..44be6435b1 100644
--- a/submodules/ChatListUI/Sources/ChatListController.swift
+++ b/submodules/ChatListUI/Sources/ChatListController.swift
@@ -5863,14 +5863,7 @@ public class ChatListControllerImpl: TelegramBaseController, ChatListController
     }
     
     var isStoryPostingAvailable: Bool {
-        switch self.storyPostingAvailability {
-        case .enabled:
-            return true
-        case .premium:
-            return self.isPremium
-        case .disabled:
-            return false
-        }
+        return false
     }
 }
 
@@ -5972,9 +5965,6 @@ private final class ChatListLocationContext {
         if let rightButton = self.rightButton {
             result.append(rightButton)
         }
-        if let storyButton = self.storyButton {
-            result.append(storyButton)
-        }
         if let proxyButton = self.proxyButton {
             result.append(proxyButton)
         }
diff --git a/submodules/ChatListUI/Sources/ChatListControllerNode.swift b/submodules/ChatListUI/Sources/ChatListControllerNode.swift
index 254d87e596..f44755afed 100644
--- a/submodules/ChatListUI/Sources/ChatListControllerNode.swift
+++ b/submodules/ChatListUI/Sources/ChatListControllerNode.swift
@@ -2010,13 +2010,5 @@ final class ChatListControllerNode: ASDisplayNode, ASGestureRecognizerDelegate {
 }
 
 func shouldDisplayStoriesInChatListHeader(storySubscriptions: EngineStorySubscriptions, isHidden: Bool) -> Bool {
-    if !storySubscriptions.items.isEmpty {
-        return true
-    }
-    if !isHidden, let accountItem = storySubscriptions.accountItem {
-        if accountItem.hasPending || accountItem.storyCount != 0 {
-            return true
-        }
-    }
     return false
 }
-- 
2.39.3 (Apple Git-146)

